<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FOCUS Journal - Semester Planner</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Indie+Flower&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  
  <style>
    /* --- CSS THEME: PREMIUM DIGITAL JOURNAL --- */
    :root {
        --paper: #fdfbf7;
        --sage: #84a59d;
        --highlight: #f9cf48;
        --text-dark: #2c1810;
        --accent-red: #ff6b6b;
        --glass: rgba(255, 255, 255, 0.7);
    }

    body { 
        margin:0; 
        font-family: 'Poppins', sans-serif; 
        background-color: #f4f1ea; 
        background-image: radial-gradient(#d1d1d1 1px, transparent 1px);
        background-size: 26px 26px; /* Dotted Journal Grid */
        color: var(--text-dark);
        overflow-x: hidden;
    }

    /* HEADER */
    .navigation {
        background: #fff;
        padding: 12px 40px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 2px dashed var(--sage);
        position: fixed; top: 0; width: 100%; z-index: 1000;
        box-sizing: border-box;
    }
    .logo-area { display: flex; align-items: center; gap: 10px; }
    .site-title { font-weight: 600; letter-spacing: 1px; }
    .site-title i { font-family: 'Dancing Script', cursive; color: var(--sage); font-style: normal; }
    .nav { display: flex; gap: 25px; }
    .nav-link { text-decoration: none; color: #6b7280; font-weight: 600; font-size: 0.85rem; text-transform: uppercase; }
    .nav-link.active { color: var(--sage); border-bottom: 2px solid var(--sage); }

    .container { display:flex; height:100vh; padding-top: 70px; box-sizing: border-box; }

    /* LEFT SIDE: MAIN LOGS */
    .left { width:68%; padding:40px; overflow-y: auto; box-sizing: border-box; }

    .search-box { 
        background:white; padding:10px 20px; border-radius:30px; 
        display:flex; align-items:center; width:100%; max-width: 400px;
        border: 1px solid #e0d3bd; margin-bottom: 20px;
    }
    .search-box input { border:none; outline:none; width:100%; font-family: 'Indie Flower', cursive; font-size: 1.1rem; }
    #search-results {
        position: absolute; background: white; width: 380px; list-style: none;
        padding: 10px; border-radius: 8px; box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        z-index: 100; display: none; border: 1px solid #eee;
    }
    #search-results li { padding: 8px; cursor: pointer; border-radius: 4px; }
    #search-results li:hover { background: var(--paper); color: var(--sage); }

    .semester-card { 
        background: #fff; padding: 40px; border: 1px solid #e0d3bd;
        border-radius: 2px; box-shadow: 12px 12px 0px rgba(215, 211, 199, 0.4);
        position: relative; margin-top: 20px;
    }

    .washi-tape {
        position: absolute; top: -18px; left: 50%; transform: translateX(-50%) rotate(-1deg);
        width: 150px; height: 38px; background: rgba(132, 165, 157, 0.5);
        border-left: 3px dashed rgba(255,255,255,0.4); border-right: 3px dashed rgba(255,255,255,0.4);
    }

    .semester-card h2 { 
        font-family: 'Dancing Script', cursive; text-align: center; 
        font-size: 3rem; margin: 10px 0 35px; color: #4b3f35;
    }

    .weeks { display: flex; justify-content: center; flex-wrap: wrap; gap: 10px; }
    .weeks span { 
        font-family: 'Indie Flower', cursive; font-size: 1.2rem; 
        cursor: pointer; padding: 2px 10px; transition: 0.2s;
        border-bottom: 2px solid transparent;
    }
    .weeks span.active { background: var(--highlight); transform: skewX(-10deg); font-weight: bold; border-bottom: none; }
    
    /* NEW: Highlighting weeks that have tasks */
    .weeks span.has-data { border-bottom: 2px dashed var(--sage); color: var(--sage); }

    .days { display: flex; gap: 12px; margin-top: 40px; }
    .day { 
        flex: 1; background: #fff; border: 1px solid #f0f0f0; 
        border-bottom: 4px solid #d7d3c7; padding: 25px 5px; text-align: center;
        cursor: pointer; font-family: 'Indie Flower', cursive; font-size: 1.1rem;
        position: relative; transition: 0.3s;
    }
    .day:hover { transform: translateY(-5px); background: #fffdf5; border-color: var(--highlight); }
    .badge { 
        position: absolute; top: 5px; right: 5px; background: var(--accent-red);
        color: white; border-radius: 50%; width: 20px; height: 20px;
        font-size: 11px; display: none; align-items: center; justify-content: center;
    }

    /* RIGHT SIDEBAR */
    .right { 
        width:32%; background: var(--glass); backdrop-filter: blur(12px);
        padding:40px; border-left: 1px solid #e0d3bd; overflow-y: auto;
        display: flex; flex-direction: column; box-sizing: border-box;
    }
    .stats-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 30px; }
    .stat-card { background: white; padding: 15px 5px; border-radius: 12px; text-align: center; border: 1px solid #eee; }
    .stat-card h1 { margin: 0; font-size: 1.8rem; color: var(--sage); }
    .stat-card p { margin: 0; font-size: 0.7rem; text-transform: uppercase; font-weight: 600; color: #999; }

    #taskList { list-style: none; padding: 0; margin-top: 20px; }
    .task-item { 
        background: white; padding: 15px; border-radius: 10px; margin-bottom: 12px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.02); border-left: 6px solid var(--sage);
        display: flex; justify-content: space-between; align-items: center;
    }
    .task-item strong { font-family: 'Indie Flower', cursive; font-size: 1.2rem; display: block; }
    .task-item small { color: #888; font-size: 0.8rem; }
    
    .delete-btn { background: #fee2e2; color: #ef4444; border: none; border-radius: 50%; width: 25px; height: 25px; cursor: pointer; font-size: 12px; }

    .add-btn { 
        background: var(--sage); color: white; border: none; padding: 15px; 
        border-radius: 10px; cursor: pointer; font-weight: 600; width: 100%; margin-top: auto;
    }

    /* MODAL */
    .modal-back { display:none; position:fixed; inset:0; background: rgba(0,0,0,0.4); align-items:center; justify-content:center; z-index:2000; }
    .modal { background:white; padding:30px; border-radius:15px; width:400px; box-shadow: 0 20px 40px rgba(0,0,0,0.2); }
    .modal h3 { font-family: 'Dancing Script', cursive; font-size: 2rem; margin-top: 0; }
    .field { margin-bottom: 15px; }
    .field label { display: block; font-size: 0.8rem; font-weight: 600; margin-bottom: 5px; }
    .field input, .field select, .field textarea { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ddd; box-sizing: border-box; }
    
    /* SUMMARY POLAROID */
    .polaroid {
        background: white; padding: 20px 20px 40px; width: 280px; margin-top: 40px;
        box-shadow: 5px 5px 15px rgba(0,0,0,0.08); transform: rotate(-1.5deg);
        border: 1px solid #eee; position: relative;
    }
    .polaroid h3 { font-family: 'Indie Flower', cursive; margin: 0 0 15px; font-size: 1.4rem; }
    .pin { position: absolute; top: -12px; left: 50%; transform: translateX(-50%); font-size: 24px; }
  </style>
</head>

<body>

<header class="navigation">
    <div class="logo-area">
        <span style="font-size: 1.5rem;">üåø</span>
        <span class="site-title">FOCUS <i>Journal</i></span>
    </div>
    <nav class="nav">
        <a href="dashboard.html" class="nav-link">Dashboard</a>
        <a href="tools.html" class="nav-link">Tools</a>
        <a href="modules.html" class="nav-link">Module</a>
        <a href="Quiz.html" class="nav-link">Quiz</a>
        <a href="community.html" class="nav-link active">Community</a>
    </nav>
</header>

<div class="container">
    <div class="left">
        <div class="search-box">
            <span style="margin-right: 10px;">üîç</span>
            <input id="searchInput" placeholder="Search your logs..." autocomplete="off" />
        </div>
        <ul id="search-results"></ul>

        <div class="semester-card">
            <div class="washi-tape"></div>
            <h2>Semester Timeline</h2>
            <div class="weeks" id="weekContainer"></div>
            <div class="days" id="daysContainer">
                <div class="day" data-day="1">Mon<div class="badge" id="b1"></div></div>
                <div class="day" data-day="2">Tue<div class="badge" id="b2"></div></div>
                <div class="day" data-day="3">Wed<div class="badge" id="b3"></div></div>
                <div class="day" data-day="4">Thu<div class="badge" id="b4"></div></div>
                <div class="day" data-day="5">Fri<div class="badge" id="b5"></div></div>
                <div class="day" data-day="6">Sat<div class="badge" id="b6"></div></div>
                <div class="day" data-day="0">Sun<div class="badge" id="b0"></div></div>
            </div>
        </div>

        <section class="polaroid">
            <span class="pin">üìå</span>
            <h3>Semester Totals</h3>
            <p>üìù Assignments: <span id="gAssign">0</span></p>
            <p>‚è≥ Tests/Quizzes: <span id="gTest">0</span></p>
            <p>üéà Personal: <span id="gEvent">0</span></p>
        </section>
    </div>

    <div class="right">
        <div class="stats-grid">
            <div class="stat-card"><h1 id="assignCount">0</h1><p>Assign</p></div>
            <div class="stat-card"><h1 id="testCount">0</h1><p>Tests</p></div>
            <div class="stat-card"><h1 id="eventCount">0</h1><p>Events</p></div>
        </div>
        <h3 style="font-family: 'Dancing Script', cursive; font-size: 2rem; margin-bottom: 0;">Today's Entries</h3>
        <ul id="taskList"></ul>
        <button class="add-btn" id="btnAdd">+ Add Log Entry</button>
    </div>
</div>

<div class="modal-back" id="modal-back">
  <div class="modal">
    <h3 id="modal-title">New Entry</h3>
    <div class="field"><label>Type</label><select id="task-type"><option value="assignment">Assignment</option><option value="test">Test/Quiz</option><option value="event">Personal Event</option></select></div>
    <div class="field"><label>Title</label><input id="task-title" placeholder="e.g. Chapter 1 Summary" /></div>
    <div class="field"><label>Subject / Location</label><input id="task-subject" placeholder="e.g. Math 101" /></div>
    <div class="field"><label>Date</label><div style="display:flex;gap:10px;"><select id="modal-week"></select><select id="modal-day"><option value="1">Mon</option><option value="2">Tue</option><option value="3">Wed</option><option value="4">Thu</option><option value="5">Fri</option><option value="6">Sat</option><option value="0">Sun</option></select></div></div>
    <div style="display:flex; gap:10px; margin-top:20px;">
        <button id="modal-cancel" style="flex:1; padding:10px; border:none; border-radius:8px; cursor:pointer;">Cancel</button>
        <button id="modal-save" style="flex:2; padding:10px; border:none; border-radius:8px; background:var(--sage); color:white; cursor:pointer;">Save Entry</button>
    </div>
  </div>
</div>

<script>
    /* --- JAVASCRIPT LOGIC --- */
    let tasks = JSON.parse(localStorage.getItem("journal_tasks")) || [];
    let selectedWeek = 1;
    let selectedDay = null;

    const modalBack = document.getElementById('modal-back');
    const taskList = document.getElementById('taskList');
    const searchResults = document.getElementById('search-results');

    function save() { 
        localStorage.setItem("journal_tasks", JSON.stringify(tasks));
        updateGlobalSummary();
        updateBadges();
        generateWeeks(); // Re-generate to update week highlights
    }

    function generateWeeks() {
        const container = document.getElementById('weekContainer');
        container.innerHTML = '';
        for (let w = 1; w <= 14; w++) {
            const span = document.createElement('span');
            span.textContent = "Week " + w;
            
            // Highlight check: Does this week have any tasks?
            const hasData = tasks.some(t => t.week === w);
            if (hasData) span.classList.add("has-data");

            if (w === selectedWeek) span.classList.add("active");
            
            span.onclick = () => {
                selectedWeek = w;
                selectedDay = null;
                generateWeeks();
                renderTasks();
                updateBadges();
            };
            container.appendChild(span);
        }
    }

    function renderTasks() {
        taskList.innerHTML = '';
        let filtered = tasks.filter(t => t.week === selectedWeek);
        if (selectedDay !== null) filtered = filtered.filter(t => t.day === selectedDay);

        let counts = { assignment: 0, test: 0, event: 0 };

        filtered.forEach(t => {
            const li = document.createElement('li');
            li.className = "task-item";
            li.innerHTML = `<div><strong>${t.subject}</strong><small>${t.title}</small></div>
                            <button class="delete-btn" onclick="deleteTask('${t.id}')">‚úï</button>`;
            taskList.appendChild(li);
            counts[t.type]++;
        });

        document.getElementById("assignCount").textContent = counts.assignment;
        document.getElementById("testCount").textContent = counts.test;
        document.getElementById("eventCount").textContent = counts.event;
    }

    function deleteTask(id) {
        if(confirm("Delete this entry?")) {
            tasks = tasks.filter(t => t.id !== id);
            save();
            renderTasks();
        }
    }

    document.getElementById('btnAdd').onclick = () => {
        const weekSelect = document.getElementById('modal-week');
        weekSelect.innerHTML = '';
        for(let i=1; i<=14; i++) {
            let opt = document.createElement('option');
            opt.value = i; opt.textContent = "Week " + i;
            if(i === selectedWeek) opt.selected = true;
            weekSelect.appendChild(opt);
        }
        if(selectedDay !== null) document.getElementById('modal-day').value = selectedDay;
        modalBack.style.display = 'flex';
    };

    document.getElementById('modal-save').onclick = () => {
        const title = document.getElementById('task-title').value;
        const subject = document.getElementById('task-subject').value;
        if(!title || !subject) return alert("Please fill in title and subject!");

        tasks.push({
            id: Date.now().toString(),
            type: document.getElementById('task-type').value,
            title, subject,
            week: parseInt(document.getElementById('modal-week').value),
            day: parseInt(document.getElementById('modal-day').value)
        });

        save();
        modalBack.style.display = 'none';
        renderTasks();
    };

    document.getElementById('modal-cancel').onclick = () => modalBack.style.display = 'none';

    document.querySelectorAll('.day').forEach(el => {
        el.onclick = () => {
            selectedDay = parseInt(el.dataset.day);
            renderTasks();
        };
    });

    function updateBadges() {
        for (let d = 0; d < 7; d++) {
            const badge = document.getElementById("b" + d);
            const count = tasks.filter(t => t.week === selectedWeek && t.day === d).length;
            badge.style.display = count > 0 ? "flex" : "none";
            badge.textContent = count;
        }
    }

    function updateGlobalSummary() {
        let a=0, t=0, e=0;
        tasks.forEach(x => { if(x.type==='assignment') a++; if(x.type==='test') t++; if(x.type==='event') e++; });
        document.getElementById('gAssign').textContent = a;
        document.getElementById('gTest').textContent = t;
        document.getElementById('gEvent').textContent = e;
    }

    // SEARCH
    document.getElementById('searchInput').oninput = (e) => {
        const q = e.target.value.toLowerCase();
        searchResults.innerHTML = '';
        if(!q) { searchResults.style.display='none'; return; }
        const res = tasks.filter(t => t.title.toLowerCase().includes(q) || t.subject.toLowerCase().includes(q));
        if(res.length) {
            searchResults.style.display = 'block';
            res.forEach(t => {
                const li = document.createElement('li');
                li.textContent = `W${t.week}: ${t.title}`;
                li.onclick = () => {
                    selectedWeek = t.week;
                    selectedDay = t.day;
                    generateWeeks(); renderTasks(); updateBadges();
                    searchResults.style.display = 'none';
                };
                searchResults.appendChild(li);
            });
        }
    };

    // INIT
    generateWeeks();
    renderTasks();
    updateBadges();
    updateGlobalSummary();
</script>

</body>
</html>

